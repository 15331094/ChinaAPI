{"name":"Chinaapi","tagline":"微博，腾讯微博，淘宝，人人，豆瓣","body":"ChinaAPI\r\n=========================\r\n\r\n.. image:: https://travis-ci.org/smallcode/ChinaAPI.png\r\n    :target: https://travis-ci.org/smallcode/ChinaAPI\r\n\r\n.. image:: https://badge.fury.io/py/chinaapi.png\r\n    :target: http://badge.fury.io/py/chinaapi\r\n\r\n\r\nChinaAPI是一个API库，使用Python编写。\r\n\r\n目前国内的几大开放平台，有新浪微博，腾讯微博，淘宝、人人、豆瓣等。\r\n针对这几个平台，用Python语言编写的API库都比较独立，各具特色。\r\n但仔细分析，不难发现这些库存在大量可通用的模块，并可抽象出统一的调用接口。\r\nChinaAPI就是为此目的而存在。\r\n\r\n安装\r\n----\r\n\r\n安装 ChinaAPI，最简单的方法:\r\n\r\n.. code-block:: bash\r\n\r\n    $ pip install chinaapi\r\n\r\n注：ChinaAPI使用： `Requests`_  （Http请求模块）\r\n\r\n----\r\n\r\n新浪微博API:\r\n------------\r\n\r\nClient使用方法：\r\n\r\n.. code-block:: python\r\n\r\n        from chinaapi.sina.weibo.open import Client\r\n\r\n\r\n        client = Client()\r\n        client.set_access_token('access_token')  # 填上取得的token（可通过OAuth2取得）\r\n\r\n        # 获取用户信息，对应的接口是：users/show\r\n        r = client.users.show(uid=123456)\r\n        print r.name  # 显示用户名\r\n\r\n        # 发布带图片的微博，对应的接口是：statuses/upload\r\n        with open('pic.jpg', 'rb') as pic:\r\n            r = client.statuses.upload(status=u'发布的内容', pic=pic)\r\n        print r.id  # 显示发布成功的微博的编号（即mid）：1234567890123456\r\n\r\n\r\nClient调用规则：**斜杠（/）映射为点（.）**\r\n\r\n====================================== =========================================\r\n            新浪微博API                               调  用\r\n====================================== =========================================\r\n  users/show                           client.users.show()\r\n  statuses/upload                      client.statuses.upload()\r\n  ...                                  ...\r\n====================================== =========================================\r\n\r\n更多API请参见：`新浪微博API文档`_\r\n\r\nOAuth2使用方法：\r\n\r\n.. code-block:: python\r\n\r\n        from chinaapi.sina.weibo.open import OAuth2, App\r\n\r\n\r\n        # 设置App，填上自己的app_key，app_secret；redirect_uri可不填\r\n        app = App('app_key', 'app_secret', 'redirect_uri')\r\n\r\n        # 获取授权链接\r\n        oauth2 = OAuth2(app)\r\n        url = oauth2.authorize()  # 如果app中未设置redirect_uri，则此处必须传入\r\n        print url # 显示授权链接（该url用于提供给用户进行登录授权，授权成功后会回调redirect_uri?code=****）\r\n\r\n        # 获取Token\r\n        token = oauth2.access_token(code='code')  #  code取自回调地址后所附的code参数\r\n        print token.access_token  # 显示访问令牌\r\n        print token.expires_in  # 显示令牌剩余授权时间的秒数\r\n        print token.expired_at  # 显示令牌到期日期，为timestamp格式\r\n\r\n        # 取消授权\r\n        r = oauth2.revoke('access_token')\r\n        print r # 显示是否成功取消\r\n\r\nOAuth2调用规则：**斜杠（/）映射为点（.）**\r\n\r\n====================================== =========================================\r\n            新浪微博oauth2 API                        调  用\r\n====================================== =========================================\r\n  oauth2/authorize                     oauth2.authorize()\r\n  oauth2/access_token                  oauth2.access_token()\r\n  oauth2/get_token_info                oauth2.get_token_info()\r\n  oauth2/revokeoauth2                  oauth2.revoke()\r\n====================================== =========================================\r\n\r\n----\r\n\r\n淘宝API:\r\n------------\r\n\r\n\r\n使用示例：\r\n\r\n.. code-block:: python\r\n\r\n        from chinaapi.taobao.open import Client, App\r\n\r\n\r\n        # client的设置\r\n        app = App('app_key', 'app_secret')  # 填上自己的app_key，app_secret\r\n        client = Client(app)\r\n\r\n        # 获取淘宝客店铺列表，对应的接口是：taobao.tbk.shops.get\r\n        # 返回结果r是json中tbk_shops_get_response的值\r\n        # 所有的接口都直接返回response（键名为：接口+_response后缀）的值\r\n        r = client.tbk.shops.get(cid=14, fields='user_id,seller_nick,shop_title,pic_url')\r\n        print len(r.tbk_shops.tbk_shop)  # 显示店铺列表的数量：40\r\n\r\n\r\n调用规则：**直接映射（可省略前缀taobao.）**\r\n\r\n====================================== =========================================\r\n               淘宝API                               调  用\r\n====================================== =========================================\r\n  taobao.itemcats.get                  client.itemcats.get()\r\n                                       或者 client.taobao.itemcats.get()\r\n  taobao.tbk.shops.get                 client.tbk.shops.get()\r\n                                       或者 client.taobao.tbk.shops.get()\r\n\r\n====================================== =========================================\r\n\r\n更多API请参见：`淘宝API文档`_\r\n\r\n----\r\n\r\n腾讯微博API:\r\n------------\r\n\r\n使用方法：\r\n\r\n.. code-block:: python\r\n\r\n        from chinaapi.qq.weibo.open import Client, App\r\n\r\n\r\n        # client的设置\r\n        app = App('app_key', 'app_secret')  # 填上自己的app_key，app_secret\r\n        client = Client(app)\r\n        client.set_access_token('access_token')  # 填上取得的access_token\r\n        client.set_openid('openid')  # 填上取得的openid\r\n\r\n        # 获取当前登录用户的信息，对应的接口是：user/info\r\n        # 返回结果r是json中的data值\r\n        r = client.user.info()\r\n        print r.name  # 显示用户名\r\n\r\n        # 发布一条带图片的微博，对应的接口是：t/add_pic\r\n        with open('pic.jpg', 'rb') as pic:\r\n            r = client.t.add_pic(content=u'发布的内容', pic=pic)\r\n        print r.id  # 显示微博的ID\r\n\r\n        # 删除一条微博，对应的接口是：t/del\r\n        r = client.t.delete(id=r.id)  # 请将del替换为delete\r\n        print r.id  # 显示微博的ID\r\n\r\n        # 有两种设置clientip的方法：\r\n        # 1.全局设置，在该client所发起的所有调用中有效\r\n        client.set_clientip('220.181.111.85')\r\n        # 2.临时设置，只在此次调用中有效，会覆盖全局设置\r\n        client.t.upload_pic(pic=pic, pic_type=2, clientip='220.181.111.85')\r\n\r\n\r\n调用规则：**斜杠（/）映射为点（.），del映射为delete（因del是Python保留字，无法作为方法名）**\r\n\r\n====================================== =========================================\r\n            腾讯微博API                               调  用\r\n====================================== =========================================\r\n  user/info                            client.user.info()\r\n  t/add_pic                            client.t.add_pic()\r\n  t/del                                client.t.delete()\r\n====================================== =========================================\r\n\r\n更多API请参见：`腾讯微博API文档`_\r\n\r\n----\r\n\r\n人人API:\r\n------------\r\n\r\n使用方法：\r\n\r\n.. code-block:: python\r\n\r\n        from chinaapi.renren.open import Client\r\n\r\n\r\n        client = Client()\r\n        client.set_access_token('access_token')  # 填上取得的access_token\r\n\r\n        # 获取用户信息，对应的接口是：/v2/user/get\r\n        r = client.user.get(userId=334258249)\r\n        print r.name  # 显示用户名\r\n\r\n        # 上传照片至用户相册，对应的接口是：/v2/photo/upload\r\n        with open('pic.jpg', 'rb') as pic:\r\n            r = client.photo.upload(file=pic)\r\n        print r.id  # 显示照片的ID\r\n\r\n\r\n调用规则：**斜杠（/）映射为点（.）**\r\n\r\n====================================== =========================================\r\n            人人API                               调  用\r\n====================================== =========================================\r\n  /v2/user/get                         client.user.get()\r\n  /v2/photo/upload                     client.photo.upload()\r\n\r\n====================================== =========================================\r\n\r\n更多API请参见：`人人API文档`_\r\n\r\n----\r\n\r\nTODO：\r\n-----------------------------------\r\n\r\n- 添加OAuth2说明\r\n\r\n感谢以下Python SDK的开发者们的贡献：\r\n-----------------------------------\r\n\r\n- 新浪微博：`sinaweibopy`_\r\n- 腾讯微博：`tweibo`_\r\n- 淘宝：`taobaopy`_\r\n- 豆瓣：`douban-client`_\r\n\r\n.. _`sinaweibopy`: https://github.com/michaelliao/sinaweibopy\r\n.. _`tweibo`: https://github.com/upbit/tweibo-pysdk\r\n.. _`taobaopy`: https://github.com/sempr/taobaopy\r\n.. _`douban-client`: https://github.com/douban/douban-client\r\n.. _`Requests`: https://github.com/kennethreitz/requests\r\n.. _`新浪微博API文档`: http://open.weibo.com/wiki/%E5%BE%AE%E5%8D%9AAPI\r\n.. _`淘宝API文档`: http://open.taobao.com/doc/category_list.htm?spm=0.0.0.0.MNfatw&id=102\r\n.. _`腾讯微博API文档`: http://wiki.open.t.qq.com/index.php/API%E6%96%87%E6%A1%A3\r\n.. _`人人API文档`: http://wiki.dev.renren.com/wiki/API2\r\n","google":"","note":"Don't delete this file! It's used internally to help with page regeneration."}